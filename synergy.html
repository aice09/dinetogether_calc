<!--
    Project Title: Dine Together Calculator
    Code Name: DINE
    Code Color: 
    Code Hex: 
    Description:
    Start:
    Developer: Carl Angelo Nievarez
        > Github: https://github.com/aice09
        > Email: carlangelopamparonievarez@gmail.com
        > FB: https://facebook.com/aice0927
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dine Together Calculator | Aice0927</title> 
    <meta name="description" content="">
    <meta name="keywords" content=""> 
    <meta name="author" content="Carl Angelo Nievarez"> 
    <!--Favicon-->
    <link rel="apple-touch-icon" sizes="57x57" href="src/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="src/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="src/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="src/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="src/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="src/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="src/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="src/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="src/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="src/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="src/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="src/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="src/favicon/favicon-16x16.png">
    <link rel="manifest" href="src/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="src/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <!--/////////////////////////////////////////////////////////////////////
                                SYSTEM STYLES
    /////////////////////////////////////////////////////////////////////-->
    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!--/////////////////////////////////////////////////////////////////////
                                SYSTEM SCRIPTS
    /////////////////////////////////////////////////////////////////////-->
    <!-- JQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    <!-- bootstrap-select by silvio moreto -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/css/bootstrap-select.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/js/bootstrap-select.min.js"></script>

    
    <script type="text/javascript"  src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript"  src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap.min.js"></script>
    <script type="text/javascript"  src="https://cdn.datatables.net/buttons/2.1.0/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript"  src="https://cdn.datatables.net/buttons/2.1.0/js/buttons.bootstrap.min.js"></script>
    <script type="text/javascript"  src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript"  src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script type="text/javascript"  src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script type="text/javascript"  src="https://cdn.datatables.net/buttons/2.1.0/js/buttons.html5.min.js"></script>
    <script type="text/javascript"  src="https://cdn.datatables.net/buttons/2.1.0/js/buttons.print.min.js"></script>
    <script type="text/javascript"  src="https://cdn.datatables.net/buttons/2.1.0/js/buttons.colVis.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.1.0/css/buttons.bootstrap.min.css">
</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            
        <a class="navbar-brand" href="#">Dine Together</a>
        </div>
    
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                <li>
                    <a  href="index.html">Home</a>
                  </li>
                  <li>
                      <a  href="synergy.html">Synergy</a>
                  </li>
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Checker <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                      <li><a href="checker-chef.html">Chef</a></li>
                      <li><a href="#">Furniture</a></li>
                      <li><a href="#">Land</a></li>
                      <li><a href="#">Card</a></li>
                    </ul>
                  </li>
                  <li>
                      <a  href="dishes.html">Dishes</a>
                  </li>
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Marketplace <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                      <li><a href="marketplace-chef.html">Chef</a></li>
                      <li><a href="#">Furniture</a></li>
                      <li><a href="marketplace-land.html">Land</a></li>
                      <li><a href="#">Card</a></li>
                    </ul>
                  </li>
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">TIPS <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                      <li><a href="calc-regtip.html">Regular TIP</a></li>
                      <li><a href="calc-bonustip.html">Bonus TIP</a></li>
                      <li><a href="calc-tipwithbonus.html">TIP with Bonus</a></li>
                    </ul>
                  </li>
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Support <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                      <li><a href="tip.html">TIP</a></li>
                      <li><a href="visit.html">Visit</a></li>
                    </ul>
                  </li>
            </ul>
            <form class="navbar-form navbar-right" role="search">
                
            <a href="https://www.buymeacoffee.com/aice0927" class="donate-btn" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 40px !important;width: 150px !important;" ></a>
            <a class="btn btn-primary my-2 my-sm-0 donate-btn" href="tip.html" ><i class="fas fa-donate"></i> TIP me! </a>
            <a class="btn btn-success my-2 my-sm-0" href="https://dinetogether.io/" >Official Website <i class="fas fa-arrow-circle-right"></i> </a>
            </form>
           <!--  <ul class="nav navbar-nav navbar-right">
                <li><a href="#">Link</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Action</a></li>
                        <li><a href="#">Another action</a></li>
                        <li><a href="#">Something else here</a></li>
                        <li><a href="#">Separated link</a></li>
                    </ul>
                </li>
            </ul> -->
        </div><!-- /.navbar-collapse -->
    </nav>
    <div class="container wrapper">
        <div class="row" >  
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <!--breadcrumbs-->                
                <ol class="breadcrumb">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="index.html">Checker</a>
                    </li>
                    <li class="active">Synergy</li>
                </ol>
                
            </div>          
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <h1>Synergy Checker</h1>
            </div>               
            <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 filterDiv">
                <!--filters--> 
                  
                          
                    <div class="form-group">
                        <label for="">Furniture ID </label>
                        <input type="text" class="form-control" id="mpFurniId" placeholder="Furniture ID">
                    </div>                
                    <button type="button" class="btn btn-primary btn-block" id="furni_add" >Add to Table</button>
                    <!--Clear Cart-->
                    <button type="button" class="btn btn-danger btn-block" id="furni_clear" >Clear Cart</button>
                    <hr>
                    <h4>Synergy</h4>   
                    <!--select-->
                    <div class="form-group">
                        <label for="">Your Homeland </label>
                        <select class="form-control" id="myHomeland">
                            <option value="">Select Homeland</option>
                            <option value="Asgard">Asgard</option>
                            <option value="Camelot">Camelot</option>
                            <option value="ElDorado">ElDorado</option>
                            <option value="Olympus">Olympus</option>
                            <option value="ShangriLa">ShangriLa</option>
                        </select>
                    </div>                    
                    <div class="form-group">
                        <label for="">No. Furniture </label>
                        <input type="text" class="form-control" id="furniCount" placeholder="Number of Furniture" readonly="readonly" >
                    </div>
                    <div class="form-group">
                        <label for="">Selected Homeland Beauty </label>
                        <input type="text" class="form-control" id="homelandTotalbeauty" placeholder="Selected Homeland Beauty" readonly="readonly" >
                    </div>
                    <table class="table table-bordered table-hover" id="synergy_table">
                        <thead>
                            <tr>
                                <th>Bonus</th>
                                <th>New Beauty</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                    <div class="form-group">
                        <label for="">Total Item Beauty </label>
                        <input type="text" class="form-control" id="furniTotalbeauty" placeholder="Total Beauty" readonly="readonly" >
                    </div>
                    <div class="form-group">
                        <label for="">Total Item MP Price </label>
                        <input type="text" class="form-control" id="furniTotalMPPrice" placeholder="Total MP Price" readonly="readonly" >
                    </div>
                    <hr>
                    <!--Display Homeland Quantity In Table-->
                    <h4>Homeland</h4>                    
                    <table class="table table-bordered table-hover" id="faction_table">
                        <thead>
                            <tr>
                                <th>Homeland</th>
                                <th>Quantity</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>

                    
                    <hr>
                    <!--Display Homeland Quantity In Table-->
                    <h4>Category</h4>                    
                    <table class="table table-bordered table-hover" id="category_table">
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th>Quantity</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>

                    <hr>
                    <!--Display Rarity Quantity In Table-->
                    <h4>Rarity</h4>                    
                    <table class="table table-bordered table-hover" id="rarity_table">
                        <thead>
                            <tr>
                                <th>Rarity</th>
                                <th>Quantity</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                    
                    
                    <hr>
                    <!--Display Rarity Quantity In Table-->
                    <h4>Status</h4>                    
                    <table class="table table-bordered table-hover" id="status_table">
                        <thead>
                            <tr>
                                <th>Status</th>
                                <th>Quantity</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                    


                
               
                  
            </div>               
            <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
                <table class="table table-bordered table-hover " id="furni_table">
                    <thead>
                        <tr><!-- 
                            <th width="2%">No</th> -->
                            <th width="10%">Furni ID</th>
                            <th width="10%">Homeland</th>
                            <th width="10%">Category</th>
                            <th width="10%">Rarity</th>
                            <th width="10%">Beauty</th>
                            <th width="10%">Duration</th>
                            <th width="10%">Status</th>
                            <th width="10%">MP Price</th>
                            <th width="5%">Action</th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="9">No furniture added</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr><!-- 
                            <th width="2%">No</th> -->
                            <th width="10%">Furni ID</th>
                            <th width="10%">Homeland</th>
                            <th width="10%">Category</th>
                            <th width="10%">Rarity</th>
                            <th width="10%">Beauty</th>
                            <th width="10%">Duration</th>
                            <th width="10%">Status</th>
                            <th width="10%">MP Price</th>
                            <th width="5%">Action</th>
                    </tr>
                    </tfoot>
               </table>             
            </div>                  
        </div>
    </div>     
    <br><br>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <hr>
        <!--Copyright-->
        <div class="footer-copyright text-center">
            <div class="container-fluid">
                &copy;  2021 <a href="https://linktr.ee/aice0927">. Carl Angelo Nievarez | <b>Chef aice0927#0620</b> </a>
            </div>
        </div>
    </div>    
    <br><br>
</body> 
</html>
<script>
    var shoppingCart = function () {
        var obj = {}, items = [];

        obj.AddItem = function (ctNFTId, faction, category, rarity, beauty, durationInit, durationRemain, status, mpPrice) {
            var item = {};
            item.quantity = 1;
            item.ctNFTId = ctNFTId;
            item.faction = faction;
            item.category = category;
            item.rarity = rarity;
            item.beauty = beauty;
            item.durationInit = durationInit;
            item.durationRemain = durationRemain;
            item.status = status;
            item.mpPrice = mpPrice;
            items.push(item)
        };

        obj.GetAllItems = function () {
            return items;
        };

        obj.GetItemByNo = function (item) {
            for (var i = 0; i < items.length; i++) {
                if (items[i].itemNo === item)
                    return item[i];
            }
            return null;
        };

        obj.CalculateTotal = function () {
            var total = 0;
            for (var i = 0; i < items.length; i++) {
                total = total + items[i].beauty;
            }
            return total;
        };

        //calculate total price of item having status = SELLING
        obj.CalculateTotalMPPrice = function () {
            var total = 0;
            for (var i = 0; i < items.length; i++) {
                if (items[i].status === "SELLING") {
                    total = total + items[i].mpPrice;
                }
            }
            return total;
        };

        //Count the number of items in the cart
        obj.Count = function () {
            return items.length;
        };

        //clear the cart
        obj.Clear = function () {
            items = [];
        };

        //count the number of items in the cart having the same faction
        obj.CountByFaction = function (faction) {
            var count = 0;
            for (var i = 0; i < items.length; i++) {
                if (items[i].faction === faction)
                    count++;
            }
            return count;
        };

        //count the number of items in the cart separated by category
        obj.CountByCategory = function (category) {
            var count = 0;
            for (var i = 0; i < items.length; i++) {
                if (items[i].category === category)
                    count++;
            }
            return count;
        };

        //count the number of items in the cart separated by rarity
        obj.CountByRarity = function (rarity) {
            var count = 0;
            for (var i = 0; i < items.length; i++) {
                if (items[i].rarity === rarity)
                    count++;
            }
            return count;
        };

        //count the number of items in the cart separated by status
        obj.CountByStatus = function (status) {
            var count = 0;
            for (var i = 0; i < items.length; i++) {
                if (items[i].status === status)
                    count++;
            }
            return count;
        };

        //get the total beauty and quantity of the specific faction
        obj.GetTotalBeautyByFaction = function (faction) {
            var totalBeauty = 0;
            var totalQuantity = 0;
            for (var i = 0; i < items.length; i++) {
                if (items[i].faction === faction) {
                    totalBeauty = totalBeauty + items[i].beauty;
                    totalQuantity = totalQuantity + items[i].quantity;
                }
            }
            return {
                totalBeauty: totalBeauty,
                totalQuantity: totalQuantity
            };
        };
        
        //remove item from cart
        obj.RemoveItem = function (ctNFTId) {
            for (var i = 0; i < items.length; i++) {
                if (items[i].ctNFTId === ctNFTId) {
                    items.splice(i, 1);
                    break;
                }
            }
        };

        //check if item is in the cart
        obj.IsInCart = function (ctNFTId) {
            var isInCart = false;
            for (var i = 0; i < items.length; i++) {
                if (items[i].ctNFTId === ctNFTId) {
                    isInCart = true;
                    break;
                }
            }
            return isInCart;
            
        };

        return obj;
    };
    var cart = new shoppingCart();
    

    $('#furni_add').click(function(){
            mpFurniId = $('#mpFurniId').val();

            //display the contains
            //console.log(cart.IsInCart(mpFurniId));

            $.ajax({
                type: "GET",
                url: 'https://backend-marketplace.dinetogether.io/v1/furniture/'+mpFurniId,
                dataType: 'json',

                success: function(response){
                    var ctNFTId = response.entity.ctNFTId;
                    var faction = response.entity.faction;
                    var category = response.entity.category;
                    var rarity = response.entity.rarity;
                    var beauty = response.entity.beauty;
                    var durationInit = response.entity.duration.numberInit;
                    var durationRemain = response.entity.duration.numberRemain;
                    var status = response.entity.status;

                    //if status is not equal to SELLING then return mpPrice = 0

                    if(status != "SELLING"){
                        mpPrice = 'NFS';
                        cart.AddItem(ctNFTId, faction, category, rarity, beauty, durationInit, durationRemain, status, mpPrice);
                        var cartItems = cart.GetAllItems();
                        //console.log(cartItems);
                    } else {
                        mpPrice = response.startingPrice;
                        cart.AddItem(ctNFTId, faction, category, rarity, beauty, durationInit, durationRemain, status, mpPrice);
                        var cartItems = cart.GetAllItems();
                        //console.log(cartItems);
                    }

                    displayCart();
                    displaySynergy();
                    displayTotalMPPrice();
                    displayTotalBeauty();
                    displayCountItem();
                    displayFactions();
                    displayCategory();
                    displayRarity();
                    displayStatus();
                },
                error: function(response){
                    console.log(response);
                }
            });
        

		});

        //clear cart
        $('#furni_clear').click(function(){
            cart.Clear();
            displayCart();
            displayTotalBeauty();
            displayCountItem();
        });

        //onclick removeItem remove item from cart
        $(document).on('click', '.removeItem', function(){
            var delete_row = $(this).data("name");
            cart.RemoveItem(delete_row);
            displayCart();
            displayTotalBeauty();
            displayCountItem();
        });

        //onchange myHomeland
        $('#myHomeland').change(function(){
            
            displaySynergy();

        });

        //function to calculate synergy and display selected homeland beauty
        function displaySynergy() {
            var myHomeland = $('#myHomeland').val();
            var myHomelandValue = cart.GetTotalBeautyByFaction(myHomeland);
            var obj = {}, factions = [];
            //if myHomelandValue.totalQuantity is beauty >= 5 && beauty < 10 multiply myHomelandValue.totalQuantity by 2.5 else if beauty >= 10 && beauty < 15 multiply by 5 percent else if beauty >= 15 && beauty < 20 multiply by 7.5 percent else if beauty >= 20 multiply by 10 percent else nothing happens
            if(myHomelandValue.totalQuantity >= 5 && myHomelandValue.totalQuantity < 10){
                obj['bonusBeauty'] = myHomelandValue.totalBeauty * 0.025;
                obj['synergizeBeauty'] = myHomelandValue.totalBeauty + obj['bonusBeauty'];
                factions.push(obj);
            } else if(myHomelandValue.totalQuantity >= 10 && myHomelandValue.totalQuantity < 15){
                obj['bonusBeauty'] = myHomelandValue.totalBeauty * 0.05;
                obj['synergizeBeauty'] = myHomelandValue.totalBeauty + obj['bonusBeauty'];
                factions.push(obj);
            } else if(myHomelandValue.totalQuantity >= 15 && myHomelandValue.totalQuantity < 20){
                obj['bonusBeauty'] = myHomelandValue.totalBeauty * 0.075;
                obj['synergizeBeauty'] = myHomelandValue.totalBeauty + obj['bonusBeauty'];
                factions.push(obj);
            } else if(myHomelandValue.totalQuantity >= 20){
                obj['bonusBeauty'] = myHomelandValue.totalBeauty * 0.10;
                obj['synergizeBeauty'] = myHomelandValue.totalBeauty + obj['bonusBeauty'];
                factions.push(obj);
            } else {
                obj['bonusBeauty'] = 0;
                obj['synergizeBeauty'] = myHomelandValue.totalBeauty;
                factions.push(obj);
            }

            //add totalBeauty to homelandTotalbeauty
            $('#homelandTotalbeauty').val(myHomelandValue.totalBeauty);

            //create data for datatable including the totalQuantity, totalBeauty, bonusBeauty, synergizeBeauty
            var data = [];
            for(var i = 0; i < factions.length; i++){
                data.push({
                    'faction': factions[i].faction,
                    'totalQuantity': myHomelandValue.totalQuantity,
                    'totalBeauty': myHomelandValue.totalBeauty,
                    'bonusBeauty': factions[i].bonusBeauty,
                    'synergizeBeauty': factions[i].synergizeBeauty
                });
            }

            //console.log(data);

            //create datatable
            $('#synergy_table').DataTable({
                data: data,
                lengthChange: false,
                searching: false,
                paging: false,
                bInfo: false,
                destroy : true, 
                columns: [
                    { data: 'bonusBeauty' },
                    { data: 'synergizeBeauty' }
                ]
            });
        }

        //function to display faction selected beauty
        /* function displaySynergy(){
            var myHomeland = $('#myHomeland').val();

            var totalBeauty = cart.GetTotalBeautyByFaction(myHomeland);
            console.log(totalBeauty);
            //$('#faction_beauty').text(totalBeauty);
        } */


        //display each faction in table
        //for each faction, display the quantity in the table
        function displayFactions(){
            var cartItems = cart.GetAllItems();
            var obj = {}, factions = [];
            for (var i = 0; i < cartItems.length; i++) {
                if (obj[cartItems[i].faction] === undefined) {
                    obj[cartItems[i].faction] = 1;
                } else {
                    obj[cartItems[i].faction]++;
                }
            }
            for (var key in obj) {
                factions.push({
                    faction: key,
                    quantity: obj[key]
                });
            }
            //dispaly in data table
            $('#faction_table').DataTable({
                data: factions,
                lengthChange: false,
                searching: false,
                paging: false,
                bInfo: false,
                destroy : true, 
                columns: [
                    { data: 'faction' },
                    { data: 'quantity' }
                ]
            });
        }

        //for each category, display the quantity in the table
        function displayCategory(){
            var cartItems = cart.GetAllItems();
            var obj = {}, category = [];
            for (var i = 0; i < cartItems.length; i++) {
                if (obj[cartItems[i].category] === undefined) {
                    obj[cartItems[i].category] = 1;
                } else {
                    obj[cartItems[i].category]++;
                }
            }
            for (var key in obj) {
                category.push({
                    category: key,
                    quantity: obj[key]
                });
            }
            //dispaly in data table
            $('#category_table').DataTable({
                data: category,
                lengthChange: false,
                searching: false,
                paging: false,
                bInfo: false,
                destroy : true, 
                columns: [
                    { data: 'category' },
                    { data: 'quantity' }
                ]
            });
        }

        //for each rarity, display the quantity in the table
        function displayRarity(){
            var cartItems = cart.GetAllItems();
            var obj = {}, rarity = [];
            for (var i = 0; i < cartItems.length; i++) {
                if (obj[cartItems[i].rarity] === undefined) {
                    obj[cartItems[i].rarity] = 1;
                } else {
                    obj[cartItems[i].rarity]++;
                }
            }
            for (var key in obj) {
                rarity.push({
                    rarity: key,
                    quantity: obj[key]
                });
            }
            //dispaly in data table
            $('#rarity_table').DataTable({
                data: rarity,
                lengthChange: false,
                searching: false,
                paging: false,
                bInfo: false,
                destroy : true, 
                columns: [
                    { data: 'rarity' },
                    { data: 'quantity' }
                ]
            });
        }

        //for each status, display the quantity in the table
        function displayStatus(){
            var cartItems = cart.GetAllItems();
            var obj = {}, status = [];
            for (var i = 0; i < cartItems.length; i++) {
                if (obj[cartItems[i].status] === undefined) {
                    obj[cartItems[i].status] = 1;
                } else {
                    obj[cartItems[i].status]++;
                }
            }
            for (var key in obj) {
                status.push({
                    status: key,
                    quantity: obj[key]
                });
            }
            //dispaly in data table
            $('#status_table').DataTable({
                data: status,
                lengthChange: false,
                searching: false,
                paging: false,
                bInfo: false,
                destroy : true, 
                columns: [
                    { data: 'status' },
                    { data: 'quantity' }
                ]
            });
        }


    
    //display cart to data table
    function displayCart() {
        var cartItems = cart.GetAllItems();
        var table = $('#furni_table').DataTable({
            data: cartItems,
            destroy : true, 
            paging: false,
            columns: [
                { data: 'ctNFTId' },
                { data: 'faction' },
                { data: 'category' },
                { data: 'rarity' },
                { data: 'beauty' },
                { data: function ( data, type, row, meta ) {   
                    var menu = '<table class="table table-bordered"><th>durationInit</th><th>durationRemain</th></tr></thead><tbody>';
                   
                    menu += '<tr><td>'+data.durationInit+'</td><td>'+data.durationRemain+'</td></tr>';                   
                    menu += '</tbody></table>';
                    return menu;
                }},
                { data: 'status' },
                { data: 'mpPrice' },
                { data: 'ctNFTId' , render : function ( data, type, row, meta ) {
                    return type === 'display'  ?
                    '<button type="button" data-name="'+data+'" class="btn btn-danger removeItem">Remove</button>' :
                    data;
                }},
            ]
        });
    }

    //function to display total MP price
    function displayTotalMPPrice(){
        var totalMPPrice = cart.CalculateTotalMPPrice();
        $('#furniTotalMPPrice').val(totalMPPrice);
    }

    //function display total beauty
    function displayTotalBeauty() {
       // var cartItems = cart.GetAllItems();
        var totalBeauty = cart.CalculateTotal();
        $('#furniTotalbeauty').val(totalBeauty);
    }


    //function display count item
    function displayCountItem() {
        var count = cart.Count();
        $('#furniCount').val(count);
    }

    //display cart onpage load
    displayCart();
    displaySynergy();
    displayFactions();
    displayCategory();
    displayRarity();
    displayStatus();
    
</script>
<style>
    .wrapper {
        margin-top: 70px;
    }
    .filterDiv {
        margin-bottom: 20px;
    }
</style>